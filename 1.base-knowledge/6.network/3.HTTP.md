## http协议
HTTP协议，全称是HyperText Transfer Protocol，即超文本传输协议，是一种用于分布式、协作式和超媒体信息系统的应用层协议。它是万维网数据通信的基础。

请求/响应模型：HTTP协议是基于请求/响应模型的，客户端发送一个请求到服务器，然后服务器返回一个响应。请求包含请求方法、URL、协议版本、请求头部和请求数据等信息，响应包含协议版本、成功或错误码、服务器信息、响应头部和响应数据等信息。

无状态性：HTTP协议是无状态的，即每个请求都是独立的，服务器不会保存任何关于客户端请求的信息。这也是为什么需要引入cookie和session来保存状态信息的原因。
请求方法：HTTP协议定义了多种请求方法，如GET、POST、PUT、DELETE等，用于表示对资源的不同操作。
状态码：HTTP响应状态码表示了请求的处理结果，如200表示成功，404表示请求的资源未找到，500表示服务器内部错误等。
消息头：HTTP消息头包含了许多有关请求或响应的有用信息，如内容类型、内容长度、编码、缓存控制等。
URL：HTTP协议通过URL来定位网络上的资源，URL的格式包括协议、主机名、端口、路径和查询字符串等部分。
连接管理：HTTP协议支持持久连接，通过设置Connection: keep-alive可以复用TCP连接，减少连接建立和关闭的开销。同时，HTTP/1.1版本开始支持管道化连接，可以同时发送多个请求，提高传输效率。
安全：HTTP协议本身是明文传输的，不安全。但可以通过SSL/TLS协议加密HTTP的数据，形成HTTPS，提供安全的数据传输。

## http/https、http1.1/http2.0、SSL/TSL区别
HTTPS基于HTTP协议（超文本传输协议），通过SSL或TLS提供加密处理数据、验证对方身份以及数据完整性保护,HTTPS标准端口443.
HTTP是轿车，提供了封装或者显示数据的具体形式；Socket是发动机，提供了网络通信的能力。
1、内容加密：采用混合加密技术，中间者无法直接查看明文内容
2、验证身份：通过证书认证客户端访问的是自己的服务器
3、保护数据完整性：防止传输的内容被中间人冒充或者篡改

TSL是SSL标准化后的产物，目前主要使用的TSL，加密是对称和非对称都是使用，是对传输内容对称加密，而对加密的密钥实行非对称加密（保证加密的密钥不被窃取即可）。公私钥对的生成算法依赖于单向陷门函数。非对称加密使用私钥解密，对称加密使用密钥解密。

HTTP2.0和HTTP1.X相比的新特性
1、新的二进制格式（Binary Format），HTTP1.x的解析是基于文本。基于文本协议的格式解析存在天然缺陷，文本的表现形式有多样性，要做到健壮性考虑的场景必然很多，二进制则不同，只认0和1的组合。基于这种考虑HTTP2.0的协议解析决定采用二进制格式，实现方便且健壮。
2、多路复用（MultiPlexing），即连接共享，即每一个request都是是用作连接共享机制的。一个request对应一个id，这样一个连接上可以有多个request，每个连接的request可以随机的混杂在一起，接收方可以根据request的 id将request再归属到各自不同的服务端请求里面。
3、header压缩，如上文中所言，对前面提到过HTTP1.x的header带有大量信息，而且每次都要重复发送，HTTP2.0使用encoder来减少需要传输的header大小，通讯双方各自cache一份header fields表，既避免了重复header的传输，又减小了需要传输的大小。
4、服务端推送（server push），HTTP2.0也具有server push功能。举例来说，在浏览器刚请求 HTML 的时候，就提前把可能会用到的 JS、CSS 文件等静态资源主动发给客户端，减少延时的等待，也就是服务器推送。

HTTP/1.1 中的管道传输中如果有一个请求阻塞了，那么队列后请求也统统被阻塞住了
HTTP/2 多请求复用一个TCP连接，一旦发生丢包，就会阻塞住所有的 HTTP 请求。

HTTP3底层改成了UDP协议，主要是因为HTTP/3 使用基于 UDP 的 QUIC 协议。
QUIC 协议通过多个独立的流传输和数据包级别的错误恢复机制，避免了队头阻塞问题。
实现 0-RTT（Round-Trip Time）或 1-RTT 连接建立，通过客户端缓存了服务器的信息，可以实现 0-RTT 连接建立，大大减少了连接建立的延迟。QUIC 协议继承了 HTTP/2 的多路复用特性。
QUIC 协议在传输层就实现了加密，即从一开始就对整个连接进行加密。

## http通信过程
HTTP 是应用层协议，HTTP 是一个无状态（stateless）协议，它以 TCP（传输层）作为底层协议，默认端口为 80. 通信过程主要如下：
服务器在 80 端口等待客户的请求。
浏览器发起到服务器的 TCP 连接（创建套接字 Socket）。
服务器接收来自浏览器的 TCP 连接。
浏览器（HTTP 客户端）与 Web 服务器（HTTP 服务器）交换 HTTP 消息。
关闭 TCP 连接，即双向关闭连接通道。

## nginx配置自签名ssl证书，来支持https访问nginx，在浏览器中访问nginx时，提示有风险。而访问其他各大网站时，也是使用了https协议，为什么可以直接访问，而不提示有风险呢？
先从ssl证书说起。是否使用https协议或者说是否使用ssl认证，是后台网站服务器来决定的。如果想使用https协议，则在后台服务中配置ssl证书即可。配置了ssl证书后，浏览器访问网站服务，就要使用https协议。在这个过程中，浏览器会先获取到网站服务器中的证书信息，然后浏览器本身维护了一个受信任的证书列表。只要网站服务返回的证书在这个受信任的证书列表里面，那么说明这个服务是安全的，浏览器就直接访问到服务了。如果返回的证书没在受信任列表中，那么浏览器认为这个服务是不安全的，就会发出报警信息，不过用户可以手动选择信任此网站，继续访问服务。
由上面的描述可知，使用了ssl证书后，是浏览器为了安全起见，去验证服务器的证书是否信任，信任才能直接访问。大厂的网站的https协议浏览器没有发出报警，是因为大厂都使用了第三方授权的SSL证书，这些证书浏览器默认都是受信任的证书，所以直接就可以访问。但是第三方授权SSL证书一般都要收费才能获取。
而自签名证书，浏览器受信任证书列表中没有它，所以就发出报警了。

上述说的是https单项认证，即浏览器认证后台服务证书。也可以开启双向认证，即浏览器认证服务器证书，服务器也认证浏览器证书。但是对于大众网站来说，一般都是单向认证即可。