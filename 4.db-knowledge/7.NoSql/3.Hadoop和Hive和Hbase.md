## Hadoop
HDFS，分布式文件存储系统。

## Hive
Hive 可以从多个数据源（如 HDFS、关系型数据库、日志文件等）中抽取数据，并将其整合到一个统一的数据仓库中。在数据仓库中，通常采用分层设计，如原始数据层、清洗转换层、数据集市层等。Hive 可以方便地实现这种分层管理，通过创建不同的表和分区，对数据进行分类存储和管理。使用 Hive 可以将原始数据存储在一个表中，经过清洗和转换后的数据存储在另一个表中，然后根据不同的业务需求创建数据集市，为不同的部门或业务提供定制化的数据服务。
多用于离线数据存储分析，使用HQL，分析时间可能比较长。

1.数据库（Database）：
在 Hive 中，数据库是一个逻辑上的概念，用于组织和管理表、视图、函数等对象。它类似于传统关系型数据库中的数据库概念。
可以使用CREATE DATABASE语句创建数据库，使用USE语句切换到特定的数据库。
2.表（Table）：
Hive 中的表是数据存储的主要单元。表可以分为内部表（Managed Table）和外部表（External Table）。
内部表的数据由 Hive 管理，当删除内部表时，其数据也会被删除。外部表的数据由外部系统管理，当删除外部表时，只会删除表的元数据，数据不会被删除。
表可以通过CREATE TABLE语句创建，定义表的列名、数据类型、存储格式等属性。
3.分区（Partition）：
分区是将表的数据按照特定的列值进行划分的一种方式。通过分区，可以将数据按照某个维度进行组织，提高查询性能。
例如，可以按照日期字段对日志表进行分区，这样在查询特定日期范围内的数据时，可以只扫描相应的分区，而不是整个表。
分区表可以使用PARTITIONED BY子句创建，在查询时可以通过指定分区条件来减少数据的扫描范围。
4.桶（Bucket）：
桶是将表或分区的数据进一步划分的方式。桶是基于某个列的值进行哈希分区，将数据分散到不同的文件中。
桶可以用于数据抽样、提高连接操作的性能等。在创建表时可以使用CLUSTERED BY子句指定桶的列。
5.数据存储格式：
Hive 支持多种数据存储格式，如文本格式（TextFile）、序列文件格式（SequenceFile）、ORC（Optimized Row Columnar）格式、Parquet 格式等。
不同的存储格式具有不同的特点，例如 ORC 和 Parquet 格式具有高效的压缩比和查询性能，适合存储大规模数据。

将结构化的数据文件映射为一张数据库表，并提供类 SQL 查询功能，用于大规模数据的离线存储、查询和分析。当执行 HiveQL 查询时，Hive 将查询转换为一系列的 MapReduce 任务（也可以使用其他执行引擎如 Tez 或 Spark）在 Hadoop 集群上执行。Hive 的元数据存储在关系型数据库中，如 MySQL 或 PostgreSQL，用于管理表结构、分区信息等。

## Hbase
是一个分布式的、面向列的非关系型数据库，运行在 Hadoop 之上。数据按照行键、列族、列限定符和时间戳组织成单元格存储。采用 LSM（Log-Structured Merge）树作为存储结构，首先将数据写入预写日志（WAL）然后数据写入内存中的 MemStore，当达到一定条件时再刷写到磁盘上的 StoreFile。由一个主节点（HMaster）管理元数据，多个从节点（RegionServer）存储实际数据。如果查询的数据在多个Region中，Region越多查询越慢。
大规模数据存储，实时数据的随机读写（低延迟读写，高并发访问），适用于需要高并发、低延迟访问数据的场景。灵活的数据模型（无模式的数据存储方式，面向列的存储），适合存储半结构化数据。高可用性和可靠性。

1.表（Table）：
HBase 中的表由行和列组成，用于存储数据。表的设计通常是基于某个业务场景或数据模型，确定表的名称、列族和列限定符等。
例如，一个存储用户信息的表可以包含列族 “personal_info” 和 “contact_info”，其中 “personal_info” 列族可以包含列限定符 “name”、“age” 等，“contact_info” 列族可以包含列限定符 “email”、“phone” 等。
2.行（Row）：
表中的一行数据代表一个实体或对象。行由行键（Row Key）唯一标识，行键是一个字节数组，可以是任意字符串或数字。
行键在 HBase 中具有重要的作用，它决定了数据在表中的存储位置和排序方式。通常，行键的设计应该考虑数据的访问模式和查询需求，以便提高查询性能。
例如，在一个存储用户交易记录的表中，可以将用户 ID 作为行键，这样可以方便地查询某个用户的所有交易记录。
3.列族（Column Family）：
列族是表的逻辑结构的一部分，用于将相关的列组织在一起。一个表可以有多个列族，每个列族可以包含多个列限定符。
列族在创建表时定义，并且在表的生命周期内通常不会改变。列族的设计应该考虑数据的性质和访问模式，以便提高存储和查询效率。
例如，在一个存储用户信息的表中，可以将 “personal_info” 和 “contact_info” 作为列族，分别存储用户的个人信息和联系方式。
4.列限定符（Column Qualifier）：
列限定符是列的名称，用于进一步细分列族中的数据。列限定符可以在表的生命周期内动态添加和删除，因此可以灵活地适应数据的变化。
列限定符通常是一个字节数组，可以是任意字符串或数字。在查询数据时，可以通过指定列族和列限定符来获取特定的列值。
例如，在 “personal_info” 列族中，可以有列限定符 “name”、“age”、“gender” 等，分别存储用户的姓名、年龄和性别信息。
5.单元格（Cell）：
单元格是表中存储数据的最小单位，由行键、列族、列限定符和时间戳唯一确定。一个单元格可以存储多个版本的数据，每个版本由一个时间戳标识。
时间戳可以是数据写入的时间，也可以是用户指定的时间。在查询数据时，可以通过指定时间戳来获取特定版本的数据。
例如，在一个存储用户交易记录的表中，一个单元格可以存储某个用户在某个时间点的交易金额，随着时间的推移，这个单元格可以存储多个版本的数据，分别代表不同时间点的交易金额。
6.分布式架构：
HBase 采用分布式架构，将数据存储在多个节点上，实现了高可用性和可扩展性。HBase 集群由一个主节点（HMaster）和多个从节点（RegionServer）组成。
HMaster 负责管理表的元数据，如表的结构、列族定义、Region 的分配等。RegionServer 负责存储和管理表的数据，每个 RegionServer 可以存储多个 Region。
Region 是 HBase 中数据存储和管理的基本单位，它是表的一部分，包含一定范围内的行键数据。当表的数据量增大时，HBase 会自动将表拆分成多个 Region，并将它们分配到不同的 RegionServer 上，以实现负载均衡和水平扩展。
依赖ZK作为服务协调，选举和故障处理。
7.数据存储模型：
HBase 采用面向列的存储模型，将数据按照列族存储在不同的文件中。这种存储模型适合于大规模数据的存储和查询，因为它可以只读取需要的列，减少磁盘 I/O 和网络传输开销。
HBase 中的数据以键值对的形式存储，其中键由行键、列族、列限定符和时间戳组成，值是实际的数据内容。数据在存储时会按照行键进行排序，以便提高查询性能。

先使用 Hive 对大规模的原始数据进行批处理和分析，提取出有价值的信息，然后将结果数据存储在 HBase 中，供实时查询和应用程序使用。